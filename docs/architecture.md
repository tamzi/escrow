## ğŸ— 1. High-Level Architecture
escrow follows a microservices approach. 
Escrow has smaller, loosely coupled services that communicate via REST APIs and event-driven messaging.

### Architecture Overview
Each microservice will handle a specific domain responsibility and can be deployed independently.

### ğŸ›  Core Microservices
1ï¸âƒ£ User Service â†’ Handles authentication, user profiles, and role-based access control (RBAC).
2ï¸âƒ£ Escrow Service â†’ Manages escrow transactions, state changes, and holds funds temporarily.
3ï¸âƒ£ Payment Service â†’ Integrates with Stripe/PayPal to process deposits and releases.
4ï¸âƒ£ Notification Service â†’ Sends emails, SMS, and app notifications on transaction updates.
5ï¸âƒ£ Dispute Service â†’ Manages buyer-seller conflicts and admin intervention.
6ï¸âƒ£ API Gateway â†’ Acts as a single entry point for all services.
7ï¸âƒ£ Logging & Monitoring â†’ Observability tools for tracking system health.

### ğŸ”— Inter-Service Communication
- REST APIs for synchronous communication
- Message Queues (Kafka/RabbitMQ) for asynchronous communication
- Webhooks for event-driven updates


## ğŸ› 2. Key Architectural Decisions
1ï¸âƒ£ Microservices


2ï¸âƒ£ Authentication & Security
Spring Security + JWT/OAuth2
Role-based access:
BUYER â†’ Can create & fund transactions
SELLER â†’ Can fulfill transactions
ADMIN â†’ Can resolve disputes


3ï¸âƒ£ Database & Persistence
PostgreSQL (Prod) | H2 (Dev)
Entities:
Users (Buyers, Sellers, Admins)
Escrow Transactions (status: PENDING, FUNDED, RELEASED, DISPUTED)
Audit Logs


4ï¸âƒ£ Payments
Integrate with Stripe/PayPal
Webhook-based confirmation system


5ï¸âƒ£ Notifications & Messaging
Emails (SendGrid)
SMS (Twilio)
WebSockets (Real-time updates for UI)


6ï¸âƒ£ Logging & Monitoring
ELK Stack (Elasticsearch, Logstash, Kibana)
Prometheus + Grafana (Metrics Monitoring)




### ğŸ“š 2. Technology stack


## ğŸ“¦ 3. Modules

#### 1ï¸âƒ£ escrow-core
#### 1ï¸âƒ£ escrow-api
##### ğŸ“‚ 1.1.1. Features

- **Authentication & Authorization**
  - Register, login, and update user profiles
  - Role-based access control (RBAC) for buyers, sellers, and admins
  - JWT token generation and validation


## ğŸ— 4. Architecture Diagram
      
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚           Client (Web / Mobile)            â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚       API Gateway (Spring Cloud)     â”‚
                                â”‚       - Routing, Security            â”‚
                                â”‚       - Rate Limiting, CORS          â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                                  â–¼                                  â”‚
                â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
                â”‚ â”‚         User Service (Spring Boot, Kotlin)                       â”‚â”‚
                â”‚ â”‚ - JWT Authentication, RBAC                                       â”‚â”‚
                â”‚ â”‚ - User Registration & Profile Mgmt                               â”‚â”‚
                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                â”‚                                  â”‚                                  â”‚
                â”‚                                  â–¼                                  â”‚
                â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
                â”‚ â”‚         Escrow Service (Spring Boot, Kotlin)                     â”‚â”‚
                â”‚ â”‚ - Creates escrow transactions                                    â”‚â”‚
                â”‚ â”‚ - Manages escrow states (Pending, Funded, Released)              â”‚â”‚
                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                â”‚                                  â”‚                                  â”‚
                â”‚                                  â–¼                                  â”‚
                â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
                â”‚ â”‚         Payment Service (Spring Boot, Kotlin)                    â”‚â”‚
                â”‚ â”‚ - Stripe / PayPal API Integration                                â”‚â”‚
                â”‚ â”‚ - Handles fund deposits & releases                               â”‚â”‚
                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                â”‚                                  â”‚                                  â”‚
                â”‚                                  â–¼                                  â”‚
                â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
                â”‚ â”‚         Notification Service (Spring Boot, Kotlin)               â”‚â”‚
                â”‚ â”‚ - Sends Emails, SMS (SendGrid, Twilio)                           â”‚â”‚
                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                â”‚                                  â”‚                                  â”‚
                â”‚                                  â–¼                                  â”‚
                â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
                â”‚ â”‚         Dispute Service (Spring Boot, Kotlin)                    â”‚â”‚
                â”‚ â”‚ - Handles disputes & admin intervention                          â”‚â”‚
                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
                â”‚                                  â”‚                                  â”‚
                â”‚                                  â–¼                                  â”‚
                â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
                â”‚ â”‚         Logging & Monitoring (ELK, Prometheus, Grafana)          â”‚â”‚
                â”‚ â”‚ - Centralized Logging & Alerts                                   â”‚â”‚
                â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚


## ğŸš§ To be done
- 